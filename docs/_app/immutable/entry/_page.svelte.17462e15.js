import{S as V,i as Y,s as J,k as v,q as D,a as O,e as Z,l as b,m as w,r as R,h as m,c as q,n as y,b as T,F as p,u as P,G as M,y as I,z as L,A as H,M as B,g as j,d as z,B as G,N as tt,o as et,O as st}from"../chunks/index.66fa1388.js";import{S as $,a as F,r as at,b as rt,c as nt,D as x,P as U,g as ot,d as lt,e as it,T as ct}from"../chunks/Title.39a9b4d3.js";function ut(i){let t,s=i[0]===F.Working?"Working":"Chilling",r,e,n,c,l,o,a,u;return{c(){t=v("h1"),r=D(s),e=O(),n=v("span"),c=D(i[1]),l=O(),o=v("h3"),a=D("Totally worked today: "),u=D(i[2]),this.h()},l(h){t=b(h,"H1",{class:!0});var _=w(t);r=R(_,s),e=q(_),n=b(_,"SPAN",{class:!0});var k=w(n);c=R(k,i[1]),k.forEach(m),_.forEach(m),l=q(h),o=b(h,"H3",{class:!0});var S=w(o);a=R(S,"Totally worked today: "),u=R(S,i[2]),S.forEach(m),this.h()},h(){y(n,"class","svelte-38u9ef"),y(t,"class","svelte-38u9ef"),y(o,"class","svelte-38u9ef")},m(h,_){T(h,t,_),p(t,r),p(t,e),p(t,n),p(n,c),T(h,l,_),T(h,o,_),p(o,a),p(o,u)},p(h,_){_&1&&s!==(s=h[0]===F.Working?"Working":"Chilling")&&P(r,s),_&2&&P(c,h[1]),_&4&&P(u,h[2])},d(h){h&&m(t),h&&m(l),h&&m(o)}}}function ft(i){let t,s;return{c(){t=v("h1"),s=D("Time to start working!")},l(r){t=b(r,"H1",{});var e=w(t);s=R(e,"Time to start working!"),e.forEach(m)},m(r,e){T(r,t,e),p(t,s)},p:M,d(r){r&&m(t)}}}function mt(i){let t,s=$[i[0]]+"",r,e,n;function c(a,u){return a[0]===F.NotStarted?ft:ut}let l=c(i),o=l(i);return{c(){t=v("span"),r=D(s),e=O(),o.c(),n=Z(),this.h()},l(a){t=b(a,"SPAN",{"aria-hidden":!0,class:!0});var u=w(t);r=R(u,s),u.forEach(m),e=q(a),o.l(a),n=Z(),this.h()},h(){y(t,"aria-hidden","true"),y(t,"class","state-symbol svelte-38u9ef")},m(a,u){T(a,t,u),p(t,r),T(a,e,u),o.m(a,u),T(a,n,u)},p(a,[u]){u&1&&s!==(s=$[a[0]]+"")&&P(r,s),l===(l=c(a))&&o?o.p(a,u):(o.d(1),o=l(a),o&&(o.c(),o.m(n.parentNode,n)))},i:M,o:M,d(a){a&&m(t),a&&m(e),o.d(a),a&&m(n)}}}function ht(i,t,s){let{state:r}=t,{currentDuration:e}=t,{totallyWorked:n}=t;return i.$$set=c=>{"state"in c&&s(0,r=c.state),"currentDuration"in c&&s(1,e=c.currentDuration),"totallyWorked"in c&&s(2,n=c.totallyWorked)},[r,e,n]}class _t extends V{constructor(t){super(),Y(this,t,ht,mt,J,{state:0,currentDuration:1,totallyWorked:2})}}function dt(i){let t,s,r,e,n,c=i[0]?"Pause":"Work",l,o,a,u,h,_,k,S=i[5]?"Share":"Save",A,d,N,W;return s=new _t({props:{state:i[3],currentDuration:i[1],totallyWorked:i[2]}}),{c(){t=v("main"),I(s.$$.fragment),r=O(),e=v("footer"),n=v("button"),l=D(c),o=O(),a=v("section"),u=v("button"),h=D("Reset"),_=O(),k=v("button"),A=D(S),this.h()},l(f){t=b(f,"MAIN",{class:!0});var g=w(t);L(s.$$.fragment,g),g.forEach(m),r=q(f),e=b(f,"FOOTER",{class:!0});var E=w(e);n=b(E,"BUTTON",{class:!0});var K=w(n);l=R(K,c),K.forEach(m),o=q(E),a=b(E,"SECTION",{class:!0});var C=w(a);u=b(C,"BUTTON",{class:!0});var Q=w(u);h=R(Q,"Reset"),Q.forEach(m),_=q(C),k=b(C,"BUTTON",{class:!0});var X=w(k);A=R(X,S),X.forEach(m),C.forEach(m),E.forEach(m),this.h()},h(){y(t,"class","svelte-h8raqb"),y(n,"class","svelte-h8raqb"),y(u,"class","outline warning svelte-h8raqb"),y(k,"class","outline svelte-h8raqb"),y(a,"class","svelte-h8raqb"),y(e,"class","svelte-h8raqb")},m(f,g){T(f,t,g),H(s,t,null),T(f,r,g),T(f,e,g),p(e,n),p(n,l),p(e,o),p(e,a),p(a,u),p(u,h),p(a,_),p(a,k),p(k,A),d=!0,N||(W=[B(n,"click",i[4]),B(u,"click",i[7]),B(k,"click",i[6])],N=!0)},p(f,[g]){const E={};g&8&&(E.state=f[3]),g&2&&(E.currentDuration=f[1]),g&4&&(E.totallyWorked=f[2]),s.$set(E),(!d||g&1)&&c!==(c=f[0]?"Pause":"Work")&&P(l,c)},i(f){d||(j(s.$$.fragment,f),d=!0)},o(f){z(s.$$.fragment,f),d=!1},d(f){f&&m(t),G(s),f&&m(r),f&&m(e),N=!1,tt(W)}}}function pt(i,t,s){var A;let r=!1,e=[],n="",c="";const l=async()=>{var d;s(8,e=at(await rt())),e.length&&s(0,r=((d=e.at(-1))==null?void 0:d.isWorking)??!1)};et(()=>{l()});const o=()=>{s(0,r=!r),s(8,e=nt(e,r))},a=!!((A=navigator.canShare)!=null&&A.call(navigator,{text:""})),u=()=>{var f;const d=(f=e.find(g=>g.isWorking))==null?void 0:f.timestamp.toFormat(U),N=e.findLast(g=>g.isWorking),W=it(e);return`${d}	${N.timestamp.toFormat(U)}			${W}`},h=async()=>{var N;const d=u();if((N=navigator.canShare)!=null&&N.call(navigator,{text:d}))try{await navigator.share({title:"Share all barcodes",text:d}),console.log("shared",d)}catch(W){console.error(W)}else{const W=document.createElement("a"),f=x.now().toFormat("yyyy-mm-dd");W.href=window.URL.createObjectURL(new File([d],`report_${f}.txt`,{type:"text/plain"})),W.download=f,W.click()}},_=()=>{if(e.length){const d=x.now();if(e[0].timestamp.day!==d.day){S();return}s(1,n=d.diff(e.at(-1).timestamp).toFormat(U)),s(2,c=ot(e))}window.requestAnimationFrame(_)};window.requestAnimationFrame(_);let k;const S=()=>{s(8,e=[]),s(0,r=!1),lt()};return i.$$.update=()=>{i.$$.dirty&257&&(e.length?r?s(3,k=F.Working):s(3,k=F.Chilling):s(3,k=F.NotStarted))},[r,n,c,k,o,a,h,S,e]}class kt extends V{constructor(t){super(),Y(this,t,pt,dt,J,{})}}function gt(i){let t,s,r,e,n,c;return t=new ct({}),n=new kt({}),{c(){I(t.$$.fragment),s=v("meta"),r=O(),e=v("div"),I(n.$$.fragment),this.h()},l(l){const o=st("svelte-e9djh3",document.head);L(t.$$.fragment,o),s=b(o,"META",{name:!0,content:!0}),o.forEach(m),r=q(l),e=b(l,"DIV",{class:!0});var a=w(e);L(n.$$.fragment,a),a.forEach(m),this.h()},h(){y(s,"name","description"),y(s,"content","App to track working and rest time"),y(e,"class","svelte-u4fm4p")},m(l,o){H(t,document.head,null),p(document.head,s),T(l,r,o),T(l,e,o),H(n,e,null),c=!0},p:M,i(l){c||(j(t.$$.fragment,l),j(n.$$.fragment,l),c=!0)},o(l){z(t.$$.fragment,l),z(n.$$.fragment,l),c=!1},d(l){G(t),m(s),l&&m(r),l&&m(e),G(n)}}}class bt extends V{constructor(t){super(),Y(this,t,null,gt,J,{})}}export{bt as default};
