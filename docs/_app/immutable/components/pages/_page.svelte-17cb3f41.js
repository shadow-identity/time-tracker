import{S as U,i as I,s as H,k as v,q as D,a as q,e as Y,l as b,m as w,r as R,h as f,c as F,n as g,b as T,F as p,u as A,B as M,w as K,x as Q,y as X,L as B,f as Z,t as x,z as $,M as tt,o as et,N as st}from"../../chunks/index-471fb7b1.js";import{S as G,a as P,r as at,b as rt,c as ot,D as J,P as L,g as nt,d as lt,e as it}from"../../chunks/workRecords-963190ac.js";function ct(i){let t,s=i[0]===P.Working?"Working":"Chilling",a,e,n,r,m,l,o,c;return{c(){t=v("h1"),a=D(s),e=q(),n=v("span"),r=D(i[1]),m=q(),l=v("h3"),o=D("Totally worked today: "),c=D(i[2]),this.h()},l(_){t=b(_,"H1",{class:!0});var h=w(t);a=R(h,s),e=F(h),n=b(h,"SPAN",{class:!0});var k=w(n);r=R(k,i[1]),k.forEach(f),h.forEach(f),m=F(_),l=b(_,"H3",{class:!0});var S=w(l);o=R(S,"Totally worked today: "),c=R(S,i[2]),S.forEach(f),this.h()},h(){g(n,"class","svelte-38u9ef"),g(t,"class","svelte-38u9ef"),g(l,"class","svelte-38u9ef")},m(_,h){T(_,t,h),p(t,a),p(t,e),p(t,n),p(n,r),T(_,m,h),T(_,l,h),p(l,o),p(l,c)},p(_,h){h&1&&s!==(s=_[0]===P.Working?"Working":"Chilling")&&A(a,s),h&2&&A(r,_[1]),h&4&&A(c,_[2])},d(_){_&&f(t),_&&f(m),_&&f(l)}}}function ut(i){let t,s;return{c(){t=v("h1"),s=D("Time to start working!")},l(a){t=b(a,"H1",{});var e=w(t);s=R(e,"Time to start working!"),e.forEach(f)},m(a,e){T(a,t,e),p(t,s)},p:M,d(a){a&&f(t)}}}function ft(i){let t,s=G[i[0]]+"",a,e,n;function r(o,c){return o[0]===P.NotStarted?ut:ct}let m=r(i),l=m(i);return{c(){t=v("span"),a=D(s),e=q(),l.c(),n=Y(),this.h()},l(o){t=b(o,"SPAN",{"aria-hidden":!0,class:!0});var c=w(t);a=R(c,s),c.forEach(f),e=F(o),l.l(o),n=Y(),this.h()},h(){g(t,"aria-hidden","true"),g(t,"class","state-symbol svelte-38u9ef")},m(o,c){T(o,t,c),p(t,a),T(o,e,c),l.m(o,c),T(o,n,c)},p(o,[c]){c&1&&s!==(s=G[o[0]]+"")&&A(a,s),m===(m=r(o))&&l?l.p(o,c):(l.d(1),l=m(o),l&&(l.c(),l.m(n.parentNode,n)))},i:M,o:M,d(o){o&&f(t),o&&f(e),l.d(o),o&&f(n)}}}function mt(i,t,s){let{state:a}=t,{currentDuration:e}=t,{totallyWorked:n}=t;return i.$$set=r=>{"state"in r&&s(0,a=r.state),"currentDuration"in r&&s(1,e=r.currentDuration),"totallyWorked"in r&&s(2,n=r.totallyWorked)},[a,e,n]}class _t extends U{constructor(t){super(),I(this,t,mt,ft,H,{state:0,currentDuration:1,totallyWorked:2})}}function ht(i){let t,s,a,e,n,r=i[0]?"Pause":"Work",m,l,o,c,_,h,k,S=i[5]?"Share":"Save",O,d,N,W;return s=new _t({props:{state:i[3],currentDuration:i[1],totallyWorked:i[2]}}),{c(){t=v("main"),K(s.$$.fragment),a=q(),e=v("footer"),n=v("button"),m=D(r),l=q(),o=v("section"),c=v("button"),_=D("Reset"),h=q(),k=v("button"),O=D(S),this.h()},l(u){t=b(u,"MAIN",{class:!0});var y=w(t);Q(s.$$.fragment,y),y.forEach(f),a=F(u),e=b(u,"FOOTER",{class:!0});var E=w(e);n=b(E,"BUTTON",{class:!0});var j=w(n);m=R(j,r),j.forEach(f),l=F(E),o=b(E,"SECTION",{class:!0});var C=w(o);c=b(C,"BUTTON",{class:!0});var z=w(c);_=R(z,"Reset"),z.forEach(f),h=F(C),k=b(C,"BUTTON",{class:!0});var V=w(k);O=R(V,S),V.forEach(f),C.forEach(f),E.forEach(f),this.h()},h(){g(t,"class","svelte-h8raqb"),g(n,"class","svelte-h8raqb"),g(c,"class","outline warning svelte-h8raqb"),g(k,"class","outline svelte-h8raqb"),g(o,"class","svelte-h8raqb"),g(e,"class","svelte-h8raqb")},m(u,y){T(u,t,y),X(s,t,null),T(u,a,y),T(u,e,y),p(e,n),p(n,m),p(e,l),p(e,o),p(o,c),p(c,_),p(o,h),p(o,k),p(k,O),d=!0,N||(W=[B(n,"click",i[4]),B(c,"click",i[7]),B(k,"click",i[6])],N=!0)},p(u,[y]){const E={};y&8&&(E.state=u[3]),y&2&&(E.currentDuration=u[1]),y&4&&(E.totallyWorked=u[2]),s.$set(E),(!d||y&1)&&r!==(r=u[0]?"Pause":"Work")&&A(m,r)},i(u){d||(Z(s.$$.fragment,u),d=!0)},o(u){x(s.$$.fragment,u),d=!1},d(u){u&&f(t),$(s),u&&f(a),u&&f(e),N=!1,tt(W)}}}function dt(i,t,s){var O;let a=!1,e=[],n="",r="";const m=async()=>{var d;s(8,e=at(await rt())),e.length&&s(0,a=((d=e.at(-1))==null?void 0:d.isWorking)??!1)};et(()=>{m()});const l=()=>{s(0,a=!a),s(8,e=ot(e,a))},o=!!((O=navigator.canShare)!=null&&O.call(navigator,{text:""})),c=()=>{var u;const d=(u=e.find(y=>y.isWorking))==null?void 0:u.timestamp.toFormat(L),N=e.findLast(y=>y.isWorking),W=it(e);return`${d}	${N.timestamp.toFormat(L)}			${W}`},_=async()=>{var N;const d=c();if((N=navigator.canShare)!=null&&N.call(navigator,{text:d}))try{await navigator.share({title:"Share all barcodes",text:d}),console.log("shared",d)}catch(W){console.error(W)}else{const W=document.createElement("a"),u=J.now().toFormat("yyyy-mm-dd");W.href=window.URL.createObjectURL(new File([d],`report_${u}.txt`,{type:"text/plain"})),W.download=u,W.click()}},h=()=>{if(e.length){const d=J.now();if(e[0].timestamp.day!==d.day){S();return}s(1,n=d.diff(e.at(-1).timestamp).toFormat(L)),s(2,r=nt(e))}window.requestAnimationFrame(h)};window.requestAnimationFrame(h);let k;const S=()=>{s(8,e=[]),s(0,a=!1),lt()};return i.$$.update=()=>{i.$$.dirty&257&&(e.length?a?s(3,k=P.Working):s(3,k=P.Chilling):s(3,k=P.NotStarted))},[a,n,r,k,l,o,_,S,e]}class pt extends U{constructor(t){super(),I(this,t,dt,ht,H,{})}}function kt(i){let t,s,a,e,n;return e=new pt({}),{c(){t=v("meta"),s=q(),a=v("div"),K(e.$$.fragment),this.h()},l(r){const m=st("svelte-goo5iw",document.head);t=b(m,"META",{name:!0,content:!0}),m.forEach(f),s=F(r),a=b(r,"DIV",{class:!0});var l=w(a);Q(e.$$.fragment,l),l.forEach(f),this.h()},h(){document.title="Time Tracker",g(t,"name","description"),g(t,"content","App to track working and rest time"),g(a,"class","svelte-u4fm4p")},m(r,m){p(document.head,t),T(r,s,m),T(r,a,m),X(e,a,null),n=!0},p:M,i(r){n||(Z(e.$$.fragment,r),n=!0)},o(r){x(e.$$.fragment,r),n=!1},d(r){f(t),r&&f(s),r&&f(a),$(e)}}}class vt extends U{constructor(t){super(),I(this,t,null,kt,H,{})}}export{vt as default};
